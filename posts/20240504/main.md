---
Keywords: ROS 2
Copyright: (C) 2024 Ryuichi Ueda
---

# C++で作ったROS 1のパッケージをROS 2に移植するときのつまづきポイント ―その3

　https://github.com/ryuichiueda/value_iteration
を
https://github.com/ryuichiueda/value_iteration2
に移植中です（おわらねー）。今日は「RVizがゴールをtopicに吐いてくれない」という謎現象を解決しました。

この記事の結論は「ROS 2でも設定次第でゴールをトピックからサブスクライブできる」です。

## Nav2用のRVizのプラグインがあるらしい（ので葬らんした）

RVizの画面の「ゴールを矢印を引いて指定するやつ」
の出力を扱う正しい方法を探していたところ、
「nav2_utilでActionサーバーを作れ」とのこと。
ただ、それだとNav2にいろいろ縛られるのでやだなと思って、
RVizからトピックをとって勝手にやろうと思いました。
が、RVizがトピックを出している形跡がありません。

で、何時間かいろいろ調べたんですが、
たどり着いたのは、
私の環境ではRVizにNav2用のプラグインが使われてて、
それがトピックを出さないということでした。
たどり着いたのは、中国語のサイトでした。
英訳して読みました。



みんなのために（じゃないかもしれないけど）
ソフトウェアアーキテクチャ作ってたら
知らないうちにしきたりまみれの平安貴族か強権な独裁者になってた、
ということは歴史的によくあることなので、
避けてほしい（し、第三者は従順にならずにいてほしい）
なと草葉の陰から思いました。
某社も「evilになるな」とか言ってたんですけどね。
RoboCupなどでちょっとやったり散々やられたりしましたが
「みんなのため」を演説で主張して自分に利益を
引っ張るのは国際的にはオッケーなやりかたなので、
見かけのスマートさを盲信するの避けたいものです。
